import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';
import { Article } from '../article';
import { RankingService } from '../ranking.service';
import { TopCitedService } from '../top-cited.service';


@Component({
  selector: 'app-first-panel',
  templateUrl: './first-panel.component.html',
  styleUrls: ['./first-panel.component.css'],
  providers: [ TopCitedService ]
})
export class FirstPanelComponent implements OnInit {
	
	@Input() public data;
  public panelTitle: string = "Confirm Paper List"
  public included: Article[] = [];
  public paperList: Article[] = [];
  public journalList: string[] = [];
  public displayState: number = 0;
  public totalNumber: number = 0;
  public removed: Array<string>;
  public editShow: boolean[] = [];
  public rankings: any;
  public toggleRankPanel: boolean = false;
  public pbf: Object = {};
  public name: string = "Client";
  @Output() public closing = new EventEmitter();
  sortToggle = false;


  public fieldList = ["Agricultural Science", 
    "Biology & Biochemistry",
    "Chemistry",
    "Clinical Medicine",
    "Computer Science",
    "Economics & Business",
    "Engineering",
    "Environment/Ecology",
    "Geosciences",
    "Immunology",
    "Materials Science",
    "Mathematics",
    "Microbiology",
    "Molecular Biology & Genetics",
    "Multidisciplinary",
    "Neuroscience & Behavior",
    "Pharmacology & Toxicology",
    "Physics",
    "Plant & Animal Science",
    "Psychiatry/Psychology",
    "Social Sciences General",
    "Space Science"]


  constructor(private RS: RankingService, private TCS: TopCitedService) { }

  ngOnInit() {
  		for (let item of this.data){
        let paper = new Article(item.title, item.journal, item.citations, item.year, item.exclude, item.firstAuthor, item.link);
        this.paperList.push(paper);
      }
      this.removed = [];
        // this.TCS.getPBF()
        //   .subscribe(
        //   body => {
        //     this.pbf = body.json();
        
        //   }
        // ) 

        this.pbf = {
    "Economics & Business" : { //still needs filled out
   averages: {
  2006: 19.56,
  2007: 16.46,
  2008: 13.47,
  2009: 11.77,
  2010: 9.82,
  2011: 7.66,
  2012: 5.42,
  2013: 3.68,
  2014: 2.01,
  2015: 0.72,
  2016: 0.14
  },
  percentiles: {
  2006: {
  47: "10%",
  171: "1%",
  434: "0.1%",
  1060: "0.01%"
  },
  2007: {
  40: "10%",
  151: "1%",
  381: "0.1%",
  916: "0.01%"
  },
  2008: {
  34: "10%",
  119: "1%",
  327: "0.1%",
  626: "0.01%"
  },
  2009: {
  29: "10%",
  99: "1%",
  259: "0.1%",
  546: "0.01%"
  },
  2010: {
  24: "10%",
  85: "1%",
  200: "0.1%",
  767: "0.01%"
  },
  2011: {
  19: "10%",
  61: "1%",
  149: "0.1%",
  265: "0.01%"
  },
  2012: {
  14: "10%",
  44: "1%",
  104: "0.1%",
  192: "0.01%"
  },
  2013: {
  10: "10%",
  29: "1%",
  68: "0.1%",
  121: "0.01%"
  },
  2014: {
  6: "10%",
  16: "1%",
  37: "0.1%",
  57: "0.01%"
  },
  2015: {
  3: "10%",
  7: "1%",
  16: "0.1%",
  30: "0.01%"
  },
  2016: {
  1: "10%",
  3: "1%",
  7: "0.1%",
  13: "0.01%"
  }

  }
}, //ends Economics & Business

"Space Science" : {
  averages: {
  2006: 31.44,
  2007: 29.10,
  2008: 25.43,
  2009: 25.16,
  2010: 22.54,
  2011: 19.12,
  2012: 15.68,
  2013: 12.04,
  2014: 7.93,
  2015: 3.45,
  2016: 0.60
  },
  percentiles: {
  2006: {
  72: "10%",
  247: "1%",
  640: "0.1%",
  4369: "0.01%"
  },
  2007: {
  66: "10%",
  220: "1%",
  654: "0.1%",
  3819: "0.01%"
  },
  2008: {
  59: "10%",
  194: "1%",
  593: "0.1%",
  922: "0.01%"
  },
  2009: {
  57: "10%",
  184: "1%",
  525: "0.1%",
  3046: "0.01%"
  },
  2010: {
  51: "10%",
  159: "1%",
  425: "0.1%",
  1683: "0.01%"
  },
  2011: {
  43: "10%",
  133: "1%",
  406: "0.1%",
  4257: "0.01%"
  },
  2012: {
  36: "10%",
  109: "1%",
  251: "0.1%",
  615: "0.01%"
  },
  2013: {
  28: "10%",
  84: "1%",
  242: "0.1%",
  1331: "0.01%"
  },
  2014: {
  18: "10%",
  53: "1%",
  166: "0.1%",
  3182: "0.01%"
  },
  2015: {
  9: "10%",
  25: "1%",
  60: "0.1%",
  153: "0.01%"
  },
  2016: {
  2: "10%",
  7: "1%",
  26: "0.1%",
  158: "0.01%"
  }

  }
}, //ends Space Science

"Social Sciences General" : {
  averages: {
  2006: 15.76,
  2007: 13.87,
  2008: 11.45,
  2009: 9.90,
  2010: 8.51,
  2011: 6.73,
  2012: 5.03,
  2013: 3.54,
  2014: 2.04,
  2015: 0.78,
  2016: 0.16
  },
  percentiles: {
  2006: {
  39: "10%",
  127: "1%",
  362: "0.1%",
  962: "0.01%"
  },
  2007: {
  34: "10%",
  113: "1%",
  320: "0.1%",
  1084: "0.01%"
  },
  2008: {
  28: "10%",
  92: "1%",
  249: "0.1%",
  493: "0.01%"
  },
  2009: {
  25: "10%",
  78: "1%",
  196: "0.1%",
  497: "0.01%"
  },
  2010: {
  21: "10%",
  67: "1%",
  181: "0.1%",
  404: "0.01%"
  },
  2011: {
  17: "10%",
  50: "1%",
  139: "0.1%",
  452: "0.01%"
  },
  2012: {
  13: "10%",
  39: "1%",
  95: "0.1%",
  191: "0.01%"
  },
  2013: {
  9: "10%",
  27: "1%",
  65: "0.1%",
  158: "0.01%"
  },
  2014: {
  6: "10%",
  16: "1%",
  39: "0.1%",
  96: "0.01%"
  },
  2015: {
  3: "10%",
  8: "1%",
  17: "0.1%",
  37: "0.01%"
  },
  2016: {
  1: "10%",
  3: "1%",
  7: "0.1%",
  14: "0.01%"
  }

  }
}, //ends Social Sciences General

"Psychiatry/Psychology" : {
  averages: {
  2006: 18.83,
  2007: 16.50,
  2008: 14.68,
  2009: 13.29,
  2010: 11.57,
  2011: 9.31,
  2012: 7.15,
  2013: 5.21,
  2014: 3.14,
  2015: 1.23,
  2016: 0.24
  },
  percentiles: {
  2006: {
  66: "10%",
  226: "1%",
  570: "0.1%",
  1332: "0.01%"
  },
  2007: {
  60: "10%",
  199: "1%",
  520: "0.1%",
  1485: "0.01%"
  },
  2008: {
  51: "10%",
  163: "1%",
  410: "0.1%",
  1312: "0.01%"
  },
  2009: {
  43: "10%",
  139: "1%",
  339: "0.1%",
  724: "0.01%"
  },
  2010: {
  37: "10%",
  119: "1%",
  313: "0.1%",
  683: "0.01%"
  },
  2011: {
  28: "10%",
  90: "1%",
  250: "0.1%",
  667: "0.01%"
  },
  2012: {
  22: "10%",
  65: "1%",
  161: "0.1%",
  318: "0.01%"
  },
  2013: {
  15: "10%",
  44: "1%",
  118: "0.1%",
  239: "0.01%"
  },
  2014: {
  9: "10%",
  26: "1%",
  58: "0.1%",
  143: "0.01%"
  },
  2015: {
  4: "10%",
  11: "1%",
  27: "0.1%",
  53: "0.01%"
  },
  2016: {
  2: "10%",
  4: "1%",
  7: "0.1%",
  14: "0.01%"
  }

  }
}, //ends Psychiatry/Psychology


"Plant & Animal Science" : {
  averages: {
  2006: 18.83,
  2007: 16.50,
  2008: 14.68,
  2009: 13.29,
  2010: 11.57,
  2011: 9.31,
  2012: 7.15,
  2013: 5.21,
  2014: 3.14,
  2015: 1.23,
  2016: 0.24
  },
  percentiles: {
  2006: {
  42: "10%",
  143: "1%",
  401: "0.1%",
  1044: "0.01%"
  },
  2007: {
  38: "10%",
  131: "1%",
  328: "0.1%",
  769: "0.01%"
  },
  2008: {
  34: "10%",
  110: "1%",
  285: "0.1%",
  799: "0.01%"
  },
  2009: {
  31: "10%",
  101: "1%",
  250: "0.1%",
  670: "0.01%"
  },
  2010: {
  27: "10%",
  87: "1%",
  222: "0.1%",
  508: "0.01%"
  },
  2011: {
  22: "10%",
  67: "1%",
  176: "0.1%",
  435: "0.01%"
  },
  2012: {
  17: "10%",
  52: "1%",
  127: "0.1%",
  302: "0.01%"
  },
  2013: {
  13: "10%",
  37: "1%",
  88: "0.1%",
  189: "0.01%"
  },
  2014: {
  8: "10%",
  23: "1%",
  54: "0.1%",
  102: "0.01%"
  },
  2015: {
  4: "10%",
  11: "1%",
  23: "0.1%",
  41: "0.01%"
  },
  2016: {
  2: "10%",
  4: "1%",
  9: "0.1%",
  13: "0.01%"
  }

  }
}, //ends Plant & Animal Science


"Physics" : {
  averages: {
  2006: 18.25,
  2007: 17.41,
  2008: 17.06,
  2009: 15.70,
  2010: 13.99,
  2011: 11.72,
  2012: 10.06,
  2013: 7.36,
  2014: 4.86,
  2015: 2.14,
  2016: 0.39
  },
  percentiles: {
  2006: {
  41: "10%",
  163: "1%",
  564: "0.1%",
  2583: "0.01%"
  },
  2007: {
  40: "10%",
  155: "1%",
  513: "0.1%",
  1373: "0.01%"
  },
  2008: {
  38: "10%",
  154: "1%",
  566: "0.1%",
  2290: "0.01%"
  },
  2009: {
  35: "10%",
  136: "1%",
  454: "0.1%",
  2028: "0.01%"
  },
  2010: {
  31: "10%",
  124: "1%",
  418: "0.1%",
  1027: "0.01%"
  },
  2011: {
  27: "10%",
  102: "1%",
  315: "0.1%",
  750: "0.01%"
  },
  2012: {
  23: "10%",
  84: "1%",
  286: "0.1%",
  837: "0.01%"
  },
  2013: {
  17: "10%",
  62: "1%",
  193: "0.1%",
  401: "0.01%"
  },
  2014: {
  12: "10%",
  41: "1%",
  120: "0.1%",
  364: "0.01%"
  },
  2015: {
  6: "10%",
  19: "1%",
  53: "0.1%",
  172: "0.01%"
  },
  2016: {
  2: "10%",
  6: "1%",
  21: "0.1%",
  68: "0.01%"
  }

  }
}, //ends Physics

"Pharmacology & Toxicology" : {
  averages: {
  2006: 26.69,
  2007: 23.95,
  2008: 21.67,
  2009: 18.82,
  2010: 16.40,
  2011: 13.11,
  2012: 10.54,
  2013: 7.75,
  2014: 4.77,
  2015: 1.81,
  2016: 0.27
  },
  percentiles: {
  2006: {
  57: "10%",
  193: "1%",
  625: "0.1%",
  1570: "0.01%"
  },
  2007: {
  53: "10%",
  170: "1%",
  490: "0.1%",
  1273: "0.01%"
  },
  2008: {
  48: "10%",
  162: "1%",
  483: "0.1%",
  1043: "0.01%"
  },
  2009: {
  42: "10%",
  134: "1%",
  353: "0.1%",
  909: "0.01%"
  },
  2010: {
  36: "10%",
  110: "1%",
  333: "0.1%",
  896: "0.01%"
  },
  2011: {
  29: "10%",
  88: "1%",
  246: "0.1%",
  618: "0.01%"
  },
  2012: {
  24: "10%",
  69: "1%",
  197: "0.1%",
  401: "0.01%"
  },
  2013: {
  18: "10%",
  50: "1%",
  134: "0.1%",
  311: "0.01%"
  },
  2014: {
  11: "10%",
  32: "1%",
  75: "0.1%",
  177: "0.01%"
  },
  2015: {
  5: "10%",
  13: "1%",
  33: "0.1%",
  78: "0.01%"
  },
  2016: {
  2: "10%",
  4: "1%",
  7: "0.1%",
  18: "0.01%"
  }

  }
}, //ends Pharmacology & Toxicology

"Neuroscience & Behavior" : {
  averages: {
  2006: 36.71,
  2007: 34.44,
  2008: 30.00,
  2009: 26.96,
  2010: 23.06,
  2011: 18.66,
  2012: 14.39,
  2013: 10.15,
  2014: 6.06,
  2015: 2.27,
  2016: 0.35
  },
  percentiles: {
  2006: {
  81: "10%",
  274: "1%",
  685: "0.1%",
  1636: "0.01%"
  },
  2007: {
  76: "10%",
  252: "1%",
  708: "0.1%",
  1758: "0.01%"
  },
  2008: {
  68: "10%",
  222: "1%",
  511: "0.1%",
  1051: "0.01%"
  },
  2009: {
  59: "10%",
  193: "1%",
  553: "0.1%",
  1192: "0.01%"
  },
  2010: {
  51: "10%",
  167: "1%",
  436: "0.1%",
  1225: "0.01%"
  },
  2011: {
  41: "10%",
  125: "1%",
  366: "0.1%",
  1133: "0.01%"
  },
  2012: {
  32: "10%",
  98: "1%",
  247: "0.1%",
  470: "0.01%"
  },
  2013: {
  23: "10%",
  67: "1%",
  179: "0.1%",
  530: "0.01%"
  },
  2014: {
  14: "10%",
  40: "1%",
  103: "0.1%",
  208: "0.01%"
  },
  2015: {
  6: "10%",
  17: "1%",
  39: "0.1%",
  88: "0.01%"
  },
  2016: {
  2: "10%",
  5: "1%",
  10: "0.1%",
  19: "0.01%"
  }

  }
}, //ends Neuroscience & Behavior

"Multidisciplinary" : {
  averages: {
  2006: 33.23,
  2007: 29.97,
  2008: 22.55,
  2009: 27.02,
  2010: 23.53,
  2011: 18.52,
  2012: 13.25,
  2013: 9.22,
  2014: 4.94,
  2015: 2.10,
  2016: 0.23
  },
  percentiles: {
  2006: {
  85: "10%",
  648: "1%",
  2853: "0.1%",
  2856: "0.01%"
  },
  2007: {
  90: "10%",
  450: "1%",
  810: "0.1%",
  818: "0.01%"
  },
  2008: {
  60: "10%",
  353: "1%",
  1340: "0.1%",
  1349: "0.01%"
  },
  2009: {
  70: "10%",
  313: "1%",
  900: "0.1%",
  910: "0.01%"
  },
  2010: {
  54: "10%",
  380: "1%",
  1086: "0.1%",
  1286: "0.01%"
  },
  2011: {
  43: "10%",
  191: "1%",
  964: "0.1%",
  1787: "0.01%"
  },
  2012: {
  29: "10%",
  133: "1%",
  516: "0.1%",
  627: "0.01%"
  },
  2013: {
  21: "10%",
  84: "1%",
  407: "0.1%",
  1964: "0.01%"
  },
  2014: {
  12: "10%",
  47: "1%",
  335: "0.1%",
  511: "0.01%"
  },
  2015: {
  5: "10%",
  22: "1%",
  252: "0.1%",
  316: "0.01%"
  },
  2016: {
  1: "10%",
  4: "1%",
  15: "0.1%",
  20: "0.01%"
  }

  }
}, //ends Multidisciplinary



"Molecular Biology & Genetics" : {
  averages: {
  2006: 53.18,
  2007: 49.90,
  2008: 42.92,
  2009: 38.34,
  2010: 32.52,
  2011: 26.47,
  2012: 19.65,
  2013: 14.15,
  2014: 8.27,
  2015: 3.10,
  2016: 0.39
  },
  percentiles: {
  2006: {
  115: "10%",
  443: "1%",
  1393: "0.1%",
  4391: "0.01%"
  },
  2007: {
  103: "10%",
  460: "1%",
  1392: "0.1%",
  6660: "0.01%"
  },
  2008: {
  91: "10%",
  387: "1%",
  1183: "0.1%",
  2942: "0.01%"
  },
  2009: {
  80: "10%",
  339: "1%",
  997: "0.1%",
  5280: "0.01%"
  },
  2010: {
  69: "10%",
  285: "1%",
  916: "0.1%",
  3277: "0.01%"
  },
  2011: {
  55: "10%",
  230: "1%",
  675: "0.1%",
  2300: "0.01%"
  },
  2012: {
  42: "10%",
  173: "1%",
  543: "0.1%",
  1918: "0.01%"
  },
  2013: {
  31: "10%",
  120: "1%",
  307: "0.1%",
  1295: "0.01%"
  },
  2014: {
  19: "10%",
  70: "1%",
  197: "0.1%",
  417: "0.01%"
  },
  2015: {
  8: "10%",
  28: "1%",
  73: "0.1%",
  154: "0.01%"
  },
  2016: {
  2: "10%",
  5: "1%",
  13: "0.1%",
  36: "0.01%"
  }

  }
}, //ends Molecular Biology & Genetics


"Microbiology" : {
  averages: {
  2006: 32.24,
  2007: 29.14,
  2008: 25.71,
  2009: 23.35,
  2010: 20.35,
  2011: 15.49,
  2012: 12.02,
  2013: 9.03,
  2014: 5.58,
  2015: 2.13,
  2016: 0.30
  },
  percentiles: {
  2006: {
  70: "10%",
  234: "1%",
  550: "0.1%",
  868: "0.01%"
  },
  2007: {
  64: "10%",
  188: "1%",
  481: "0.1%",
  1529: "0.01%"
  },
  2008: {
  56: "10%",
  182: "1%",
  458: "0.1%",
  890: "0.01%"
  },
  2009: {
  51: "10%",
  173: "1%",
  458: "0.1%",
  946: "0.01%"
  },
  2010: {
  45: "10%",
  143: "1%",
  422: "0.1%",
  671: "0.01%"
  },
  2011: {
  34: "10%",
  102: "1%",
  298: "0.1%",
  626: "0.01%"
  },
  2012: {
  27: "10%",
  87: "1%",
  208: "0.1%",
  739: "0.01%"
  },
  2013: {
  21: "10%",
  62: "1%",
  152: "0.1%",
  302: "0.01%"
  },
  2014: {
  13: "10%",
  37: "1%",
  90: "0.1%",
  254: "0.01%"
  },
  2015: {
  6: "10%",
  17: "1%",
  40: "0.1%",
  77: "0.01%"
  },
  2016: {
  2: "10%",
  4: "1%",
  13: "0.1%",
  28: "0.01%"
  }

  }
}, //ends Microbiology


"Mathematics" : {
  averages: {
  2006: 8.59,
  2007: 7.85,
  2008: 7.21,
  2009: 6.38,
  2010: 5.57,
  2011: 4.40,
  2012: 3.27,
  2013: 2.26,
  2014: 1.34,
  2015: 0.54,
  2016: 0.10
  },
  percentiles: {
  2006: {
  21: "10%",
  72: "1%",
  222: "0.1%",
  1047: "0.01%"
  },
  2007: {
  19: "10%",
  67: "1%",
  216: "0.1%",
  538: "0.01%"
  },
  2008: {
  17: "10%",
  60: "1%",
  187: "0.1%",
  575: "0.01%"
  },
  2009: {
  15: "10%",
  51: "1%",
  143: "0.1%",
  516: "0.01%"
  },
  2010: {
  14: "10%",
  47: "1%",
  126: "0.1%",
  336: "0.01%"
  },
  2011: {
  11: "10%",
  35: "1%",
  83: "0.1%",
  281: "0.01%"
  },
  2012: {
  9: "10%",
  26: "1%",
  61: "0.1%",
  127: "0.01%"
  },
  2013: {
  6: "10%",
  19: "1%",
  43: "0.1%",
  81: "0.01%"
  },
  2014: {
  4: "10%",
  12: "1%",
  27: "0.1%",
  56: "0.01%"
  },
  2015: {
  2: "10%",
  6: "1%",
  13: "0.1%",
  27: "0.01%"
  },
  2016: {
  1: "10%",
  3: "1%",
  5: "0.1%",
  14: "0.01%"
  }

  }
}, //ends Mathematics



"Materials Science" : {
  averages: {
  2006: 17.60,
  2007: 18.49,
  2008: 16.81,
  2009: 15.93,
  2010: 15.11,
  2011: 13.02,
  2012: 10.91,
  2013: 8.21,
  2014: 5.61,
  2015: 2.32,
  2016: 0.31
  },
  percentiles: {
  2006: {
  41: "10%",
  168: "1%",
  597: "0.1%",
  1598: "0.01%"
  },
  2007: {
  41: "10%",
  169: "1%",
  585: "0.1%",
  2063: "0.01%"
  },
  2008: {
  37: "10%",
  152: "1%",
  556: "0.1%",
  2550: "0.01%"
  },
  2009: {
  35: "10%",
  147: "1%",
  510: "0.1%",
  1610: "0.01%"
  },
  2010: {
  33: "10%",
  140: "1%",
  502: "0.1%",
  1761: "0.01%"
  },
  2011: {
  29: "10%",
  119: "1%",
  394: "0.1%",
  1077: "0.01%"
  },
  2012: {
  24: "10%",
  97: "1%",
  291: "0.1%",
  802: "0.01%"
  },
  2013: {
  19: "10%",
  70: "1%",
  218: "0.1%",
  517: "0.01%"
  },
  2014: {
  14: "10%",
  47: "1%",
  141: "0.1%",
  368: "0.01%"
  },
  2015: {
  6: "10%",
  21: "1%",
  55: "0.1%",
  151: "0.01%"
  },
  2016: {
  2: "10%",
  4: "1%",
  10: "0.1%",
  25: "0.01%"
  }

  }
}, //ends Materials Science

"Immunology" : {
  averages: {
  2006: 39.13,
  2007: 36.18,
  2008: 32.58,
  2009: 29.06,
  2010: 24.54,
  2011: 20.07,
  2012: 15.23,
  2013: 11.24,
  2014: 6.86,
  2015: 2.68,
  2016: 0.40
  },
  percentiles: {
  2006: {
  82: "10%",
  309: "1%",
  1068: "0.1%",
  2039: "0.01%"
  },
  2007: {
  77: "10%",
  300: "1%",
  939: "0.1%",
  1567: "0.01%"
  },
  2008: {
  69: "10%",
  261: "1%",
  703: "0.1%",
  1872: "0.01%"
  },
  2009: {
  62: "10%",
  235: "1%",
  639: "0.1%",
  1909: "0.01%"
  },
  2010: {
  52: "10%",
  190: "1%",
  508: "0.1%",
  1059: "0.01%"
  },
  2011: {
  42: "10%",
  149: "1%",
  507: "0.1%",
  1097: "0.01%"
  },
  2012: {
  33: "10%",
  115: "1%",
  284: "0.1%",
  730: "0.01%"
  },
  2013: {
  24: "10%",
  84: "1%",
  243: "0.1%",
  517: "0.01%"
  },
  2014: {
  16: "10%",
  54: "1%",
  138: "0.1%",
  224: "0.01%"
  },
  2015: {
  7: "10%",
  23: "1%",
  60: "0.1%",
  131: "0.01%"
  },
  2016: {
  2: "10%",
  5: "1%",
  13: "0.1%",
  33: "0.01%"
  }

  }
}, //ends Immunology

"Geosciences" : {
  averages: {
  2006: 24.42,
  2007: 21.40,
  2008: 19.94,
  2009: 18.29,
  2010: 15.36,
  2011: 13.12,
  2012: 10.00,
  2013: 7.18,
  2014: 4.26,
  2015: 1.67,
  2016: 0.29
  },
  percentiles: {
  2006: {
  55: "10%",
  184: "1%",
  498: "0.1%",
  1279: "0.01%"
  },
  2007: {
  49: "10%",
  152: "1%",
  453: "0.1%",
  1418: "0.01%"
  },
  2008: {
  45: "10%",
  146: "1%",
  436: "0.1%",
  955: "0.01%"
  },
  2009: {
  41: "10%",
  130: "1%",
  375: "0.1%",
  1139: "0.01%"
  },
  2010: {
  34: "10%",
  103: "1%",
  318: "0.1%",
  775: "0.01%"
  },
  2011: {
  30: "10%",
  89: "1%",
  230: "0.1%",
  726: "0.01%"
  },
  2012: {
  23: "10%",
  67: "1%",
  167: "0.1%",
  346: "0.01%"
  },
  2013: {
  17: "10%",
  49: "1%",
  129: "0.1%",
  281: "0.01%"
  },
  2014: {
  10: "10%",
  28: "1%",
  76: "0.1%",
  161: "0.01%"
  },
  2015: {
  5: "10%",
  13: "1%",
  30: "0.1%",
  64: "0.01%"
  },
  2016: {
  2: "10%",
  4: "1%",
  9: "0.1%",
  14: "0.01%"
  }

  }
}, //ends Geosciences



"Environment/Ecology" : {
  averages: {
  2006: 28.74,
  2007: 26.06,
  2008: 23.45,
  2009: 19.79,
  2010: 17.37,
  2011: 13.92,
  2012: 11.04,
  2013: 7.63,
  2014: 4.57,
  2015: 1.76,
  2016: 0.28
  },
  percentiles: {
  2006: {
  63: "10%",
  218: "1%",
  686: "0.1%",
  2694: "0.01%"
  },
  2007: {
  57: "10%",
  194: "1%",
  512: "0.1%",
  1098: "0.01%"
  },
  2008: {
  50: "10%",
  177: "1%",
  554: "0.1%",
  1593: "0.01%"
  },
  2009: {
  44: "10%",
  149: "1%",
  427: "0.1%",
  1124: "0.01%"
  },
  2010: {
  38: "10%",
  126: "1%",
  356: "0.1%",
  1006: "0.01%"
  },
  2011: {
  31: "10%",
  100: "1%",
  290: "0.1%",
  839: "0.01%"
  },
  2012: {
  25: "10%",
  79: "1%",
  201: "0.1%",
  577: "0.01%"
  },
  2013: {
  18: "10%",
  53: "1%",
  141: "0.1%",
  355: "0.01%"
  },
  2014: {
  11: "10%",
  32: "1%",
  74: "0.1%",
  176: "0.01%"
  },
  2015: {
  5: "10%",
  14: "1%",
  33: "0.1%",
  59: "0.01%"
  },
  2016: {
  2: "10%",
  4: "1%",
  9: "0.1%",
  14: "0.01%"
  }

  }
}, //ends Environment/Ecology

"Engineering" : {
  averages: {
  2006: 12.35,
  2007: 12.08,
  2008: 10.90,
  2009: 10.66,
  2010: 9.52,
  2011: 8.08,
  2012: 6.35,
  2013: 4.84,
  2014: 3.08,
  2015: 1.22,
  2016: 0.18
  },
  percentiles: {
  2006: {
  31: "10%",
  103: "1%",
  283: "0.1%",
  1065: "0.01%"
  },
  2007: {
  30: "10%",
  101: "1%",
  285: "0.1%",
  765: "0.01%"
  },
  2008: {
  27: "10%",
  88: "1%",
  241: "0.1%",
  480: "0.01%"
  },
  2009: {
  26: "10%",
  86: "1%",
  208: "0.1%",
  496: "0.01%"
  },
  2010: {
  23: "10%",
  74: "1%",
  203: "0.1%",
  521: "0.01%"
  },
  2011: {
  20: "10%",
  62: "1%",
  150: "0.1%",
  366: "0.01%"
  },
  2012: {
  16: "10%",
  46: "1%",
  111: "0.1%",
  308: "0.01%"
  },
  2013: {
  12: "10%",
  35: "1%",
  85: "0.1%",
  187: "0.01%"
  },
  2014: {
  8: "10%",
  24: "1%",
  55: "0.1%",
  115: "0.01%"
  },
  2015: {
  4: "10%",
  11: "1%",
  25: "0.1%",
  60: "0.01%"
  },
  2016: {
  1: "10%",
  3: "1%",
  7: "0.1%",
  18: "0.01%"
  }

  }
}, //ends Engineering


"Agricultural Science" : {
  averages: {
  2006: 18.34,
  2007: 16.25,
  2008: 13.61,
  2009: 12.11,
  2010: 10.67,
  2011: 8.64,
  2012: 6.86,
  2013: 5.03,
  2014: 3.11,
  2015: 1.22,
  2016: 0.21
  },
  percentiles: {
  2006: {
  44: "10%",
  125: "1%",
  319: "0.1%",
  574: "0.01%"
  },
  2007: {
  39: "10%",
  113: "1%",
  285: "0.1%",
  536: "0.01%"
  },
  2008: {
  34: "10%",
  98: "1%",
  218: "0.1%",
  618: "0.01%"
  },
  2009: {
  30: "10%",
  80: "1%",
  198: "0.1%",
  434: "0.01%"
  },
  2010: {
  26: "10%",
  74: "1%",
  181: "0.1%",
  381: "0.01%"
  },
  2011: {
  21: "10%",
  55: "1%",
  143: "0.1%",
  242: "0.01%"
  },
  2012: {
  17: "10%",
  45: "1%",
  98: "0.1%",
  173: "0.01%"
  },
  2013: {
  13: "10%",
  32: "1%",
  67: "0.1%",
  168: "0.01%"
  },
  2014: {
  8: "10%",
  21: "1%",
  43: "0.1%",
  81: "0.01%"
  },
  2015: {
  4: "10%",
  10: "1%",
  20: "0.1%",
  32: "0.01%"
  },
  2016: {
  1: "10%",
  3: "1%",
  6: "0.1%",
  10: "0.01%"
  }

  }
}, //ends Agricultural Sciences

"Chemistry" : {
  averages: {
  2006: 23.55,
  2007: 21.79,
  2008: 21.20,
  2009: 19.18,
  2010: 17.70,
  2011: 15.32,
  2012: 13.03,
  2013: 9.62,
  2014: 6.45,
  2015: 2.75,
  2016: 0.39
  },
  percentiles: {
  2006: {
  54: "10%",
  194: "1%",
  605: "0.1%",
  1732: "0.01%"
  },
  2007: {
  49: "10%",
  178: "1%",
  580: "0.1%",
  1959: "0.01%"
  },
  2008: {
  46: "10%",
  172: "1%",
  611: "0.1%",
  2158: "0.01%"
  },
  2009: {
  43: "10%",
  155: "1%",
  532: "0.1%",
  1844: "0.01%"
  },
  2010: {
  39: "10%",
  147: "1%",
  512: "0.1%",
  1376: "0.01%"
  },
  2011: {
  34: "10%",
  130: "1%",
  390: "0.1%",
  1014: "0.01%"
  },
  2012: {
  29: "10%",
  105: "1%",
  343: "0.1%",
  984: "0.01%"
  },
  2013: {
  22: "10%",
  77: "1%",
  216: "0.1%",
  579: "0.01%"
  },
  2014: {
  15: "10%",
  51: "1%",
  157: "0.1%",
  380: "0.01%"
  },
  2015: {
  7: "10%",
  23: "1%",
  67: "0.1%",
  150: "0.01%"
  },
  2016: {
  2: "10%",
  5: "1%",
  12: "0.1%",
  32: "0.01%"
  }

  }
}, //ends Chemistry

"Clinical Medicine" : {

  averages: {
  2006: 27.07,
  2007: 23.81,
  2008: 21.21,
  2009: 19.07,
  2010: 16.33,
  2011: 13.40,
  2012: 10.58,
  2013: 7.60,
  2014: 4.63,
  2015: 1.82,
  2016: 0.29
  },
  percentiles: {
  2006: {
  61: "10%",
  219: "1%",
  737: "0.1%",
  1743: "0.01%"
  },
  2007: {
  54: "10%",
  198: "1%",
  631: "0.1%",
  1806: "0.01%"
  },
  2008: {
  48: "10%",
  176: "1%",
  564: "0.1%",
  1478: "0.01%"
  },
  2009: {
  43: "10%",
  155: "1%",
  519: "0.1%",
  1652: "0.01%"
  },
  2010: {
  37: "10%",
  131: "1%",
  424: "0.1%",
  1312: "0.01%"
  },
  2011: {
  30: "10%",
  105: "1%",
  318: "0.1%",
  1177: "0.01%"
  },
  2012: {
  24: "10%",
  81: "1%",
  275: "0.1%",
  918: "0.01%"
  },
  2013: {
  17: "10%",
  59: "1%",
  186: "0.1%",
  605: "0.01%"
  },
  2014: {
  11: "10%",
  37: "1%",
  122: "0.1%",
  361: "0.01%"
  },
  2015: {
  5: "10%",
  17: "1%",
  53: "0.1%",
  218: "0.01%"
  },
  2016: {
  2: "10%",
  4: "1%",
  11: "0.1%",
  33: "0.01%"
  }

  }


}, //ends Clinical Medicine

"Biology & Biochemistry" : {

  averages: {
  2006: 33.50,
  2007: 30.30,
  2008: 27.46,
  2009: 24.91,
  2010: 21.03,
  2011: 17.13,
  2012: 13.46,
  2013: 9.64,
  2014: 5.84,
  2015: 2.25,
  2016: 0.34
  },
  percentiles: {
  2006: {
  72: "10%",
  245: "1%",
  725: "0.1%",
  2310: "0.01%"
  },
  2007: {
  65: "10%",
  227: "1%",
  694: "0.1%",
  2013: "0.01%"
  },
  2008: {
  59: "10%",
  206: "1%",
  584: "0.1%",
  1515: "0.01%"
  },
  2009: {
  53: "10%",
  179: "1%",
  549: "0.1%",
  1977: "0.01%"
  },
  2010: {
  45: "10%",
  149: "1%",
  416: "0.1%",
  1531: "0.01%"
  },
  2011: {
  37: "10%",
  118: "1%",
  344: "0.1%",
  971: "0.01%"
  },
  2012: {
  29: "10%",
  105: "1%",
  343: "0.1%",
  984: "0.01%"
  },
  2013: {
  21: "10%",
  66: "1%",
  221: "0.1%",
  627: "0.01%"
  },
  2014: {
  13: "10%",
  40: "1%",
  122: "0.1%",
  505: "0.01%"
  },
  2015: {
  6: "10%",
  18: "1%",
  53: "0.1%",
  253: "0.01%"
  },
  2016: {
  2: "10%",
  4: "1%",
  10: "0.1%",
  62: "0.01%"
  }

  }


}, //ends Biology & Biochemsitry

"Computer Science" : {

  averages: {
  2006: 8.25,
  2007: 11.81,
  2008: 10.82,
  2009: 10.44,
  2010: 8.82,
  2011: 7.30,
  2012: 5.45,
  2013: 3.98,
  2014: 2.48,
  2015: 0.93,
  2016: 0.16
  },
  percentiles: {
  2006: {
  18: "10%",
  90: "1%",
  419: "0.1%",
  2980: "0.01%"
  },
  2007: {
  27: "10%",
  107: "1%",
  418: "0.1%",
  1713: "0.01%"
  },
  2008: {
  24: "10%",
  99: "1%",
  445: "0.1%",
  1548: "0.01%"
  },
  2009: {
  22: "10%",
  84: "1%",
  380: "0.1%",
  5187: "0.01%"
  },
  2010: {
  19: "10%",
  76: "1%",
  348: "0.1%",
  1908: "0.01%"
  },
  2011: {
  17: "10%",
  61: "1%",
  282: "0.1%",
  1021: "0.01%"
  },
  2012: {
  13: "10%",
  46: "1%",
  139: "0.1%",
  609: "0.01%"
  },
  2013: {
  10: "10%",
  33: "1%",
  97: "0.1%",
  323: "0.01%"
  },
  2014: {
  6: "10%",
  22: "1%",
  73: "0.1%",
  309: "0.01%"
  },
  2015: {
  3: "10%",
  10: "1%",
  27: "0.1%",
  79: "0.01%"
  },
  2016: {
  1: "10%",
  3: "1%",
  9: "0.1%",
  52: "0.01%"
  }

  }


}, //ends Computer Science


} //ends pbf
  

  
  }

  sort(){
    this.sortToggle = !this.sortToggle;
    if (this.sortToggle){
        this.paperList.sort(function(a, b){
      return b.year - a.year
    })
      } else {
          this.paperList.sort(function(b, a){
      return a.year - b.year;
    })
      }
  }

  checkDisplayState() {
     if (this.paperList.length === 0){
          this.displayState = 0;
        }
     switch (this.displayState) {
      case 0:
        this.panelTitle = "Confirm Paper List";
      break;
      case 1:
        this.journalList = [];
        this.included = [];
        this.panelTitle = "Confirm Journal List";
        for (let item of this.paperList){
          if (!item.exclude){
            this.included.push(item);
            }
          }
        this.journalList.push(this.included[0].journal)  
       //this little bit removes duplicates, I'm pretty sure...
        for (let item in this.included){
          if (this.journalList.every((a) => {
            return this.clean(a) !== this.clean(this.included[item].journal)
          })) {
            this.journalList.push(this.included[item].journal)
          }

        }
        //now I want to sort out suggested things not to look for
        this.journalList.forEach((a, i)=>{
          if (a.match(/patent/gi) || a.match(/abstracts/gi)){
            this.removed.push(this.journalList.splice(i, 1)[0])
          }

        })


        break;

        case 2:

          this.panelTitle = "Retrieve Rankings";
          this.rankings = {
            rankedJournals: [
              {
                journalName: 'Journal Name',
                search: 'journal name',
                noRank: false,
                complete: true,
                GSRank: [
                  {
                    cat: 'Chemical Engineering or whatever',
                    rank: 8,
                    catLink: {
                      link: 'www.chemicalengineering.com',

                      }
                  }
           
                ]
              }
            ]
          }
          this.toggleRankPanel = true;
          // this.RS.getRanks(this.journalList)
          //   .subscribe(
          //     body => this.rankings = body.json(),
          //     error => console.log(error),
          //     () => this.toggleRankPanel = true);
        

        break;

        case 3:
          this.panelTitle = "Find Top-cited Articles"

        break;

        case 4:
          this.panelTitle = "Exhibit Index Builder"
        break;
      
      default:
        // code...
        break;
    }

  

 
  }

  gotoMC(){
    this.displayState = 3;
  }

  jumpBack(){
    this.displayState=0;
  }

  edit(i){
    this.editShow[i] = true;
  }

  close(){
    this.closing.emit(false);
  }

  check(name){
    this.name = name;
   
  }

  submitEdit(i, j){
     this.journalList[i] = j;
     this.editShow[i]=false;
  }

  remove(i){
      this.removed.push(this.journalList.splice(i, 1)[0]);

  }

  clean (a){
   a = a.toLowerCase().replace(/\s(and|&)\s/g, " ").replace(/[^\s\w]/g, " ").replace(/\s+/g, " ").replace(/the/gi, "").trim();
  return (a);
}



  returnItem(i){
    this.journalList.push(this.removed.splice(i, 1)[0]) ;
  }


  next(){
    this.displayState++;
    this.checkDisplayState();
  }

  previous(){
    this.displayState--;
    this.checkDisplayState();
  }


}
